@model TaskViewModel

@{
    ViewBag.Title = "List";
    Layout = "~/Areas/Administration/Views/Shared/_Layout.cshtml";
}

<header class="head">
    <div class="search-bar">
        <form class="main-search" action="">
            <div class="input-group">
                <input type="text" class="form-control" placeholder="Live Search ...">
                <span class="input-group-btn">
                    <button class="btn btn-primary btn-sm text-muted" type="button">
                        <i class="fa fa-search"></i>
                    </button>
                </span>
            </div>
        </form>
    </div>
    <div class="main-bar row">
        <div class="col-md-6">
            <h3><i class="fa fa-dashboard"></i>&nbsp; Project Name</h3>
        </div>
        <div class="col-md-6">
            <div class="bar-right-content pull-right">
                <a href="@Url.Action("New", "Task", new { area = "Administration", pId = PM.Common.ShortGuid.Encode(Model.ProjectId) })"><h3><i class="fa fa-plus-square"></i>&nbsp; Add</h3></a>
            </div>
        </div>
    </div>
</header>

@Html.Partial("_LeftMenuBar", @Model.ProjectId)

<div class="right-content">
    <div class="main-outer">
        <div class="main-inner">
               <table id="table-tasks" class="table table-striped">
                   <thead>
                       <tr>
                           <td><h4>Title</h4></td>
                           <td><h4>Status</h4></td>
                           <td><h4>Priority</h4></td>
                           <td><h4>Assignee</h4></td>
                           <td><h4>Created</h4></td>
                           <td><h4>Due Date</h4></td>
                           <td><h4>Actions</h4></td>
                       </tr>
                   </thead>
                   <tbody>
                       @foreach (var item in Model.Tasks)
                       {
                        <tr>
                            <td>@item.Title</td>
                            <td>@Model.TaskStatusList.First(p => p.Key == item.StatusId).Value</td>
                            <td>
                                @{ 
                                    var priorityClass = String.Format("{0}-priority", Model.TaskPriorityList.First(p => p.Key == item.PriorityId).Value.ToLower());
                                }
                                <div id="task-priority" class="@priorityClass" title="@Model.TaskPriorityList.First(p => p.Key == item.PriorityId).Value"></div>
                            </td>
                            <td>@item.AssignedToUser.UserName</td>
                            <td>@item.DateCreated.ToShortDateString()</td>
                            <td>@item.DueDate</td>
                            <td>@Html.ActionLink("Open", "Edit", "Task",  new { area="Administration", tId = PM.Common.ShortGuid.Encode(item.Id) }, null)</td>
                        </tr>
                       }
                       
                   </tbody>
               </table>

        </div>
    </div>
</div>